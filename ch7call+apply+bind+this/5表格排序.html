<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>表格排序</title>
    <style>
        *{
            margin:0;
            padding:0;
            font: 14px "微软雅黑" ;
        }
        .box{
            width: 400px;
            margin:20px auto;
            padding: 20px;
            border:1px solid #008000;
            border-radius: 10px;
            box-shadow: 3px 3px 10px 0 #DBEEBD;
        }
        .box thead{
            background: #008000;
            color:white;
        }
        .box thead tr,.box tbody tr {
            height:35px;
        }
        .box thead tr th,.box tbody tr td{
            width: 100px;
            text-align: center;
        }

        .box tbody tr:nth-child(even){
            background: lawngreen;
        }
        .box thead tr th.cursor{
            cursor: pointer;
        }

    </style>
</head>
<body>
    <div class="box">
        <table id="tab">
            <thead>
                <tr>
                    <th>姓名</th>
                    <th class="cursor">年龄</th>
                    <th class="cursor">武力</th>
                    <th>性别</th>
                </tr>
            </thead>
            <tbody>
                <tr >
                    <td>令狐冲</td>
                    <td>25</td>
                    <td>99</td>
                    <td>男</td>
                </tr>
                <tr >
                    <td>令狐冲</td>
                    <td>25</td>
                    <td>99</td>
                    <td>男</td>
                </tr>
                <tr>
                    <td>令狐冲</td>
                    <td>25</td>
                    <td>99</td>
                    <td>男</td>
                </tr>
                <tr>
                    <td>令狐冲</td>
                    <td>25</td>
                    <td>99</td>
                    <td>男</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        var oTable = document.getElementById("tab");
        var tHead = oTable.tHead;
        var oThs = tHead.rows[0].cells;
        var oTbody = oTable.tBodies[0];
        var oRows = oTbody.rows;
        var response = null;
        var xhr = new XMLHttpRequest();
        xhr.open("get","./data/data.txt",true);
        xhr.onreadystatechange =  function(){
            if (xhr.readyState ===4 && xhr.status ==200 ){
                var result = xhr.responseText;
                response = JSON.parse(result);
                for(var i= 0,len = response.length;i<len;i++){
                    var item = response[i];
                    oRows[i].cells[0].innerHTML = item.name;
                    oRows[i].cells[1].innerHTML = item.age;
                    oRows[i].cells[2].innerHTML = item.score;
                    oRows[i].cells[3].innerHTML = item.sex;
                }
            }
        }
        xhr.send(null);

        oThs[1].onclick = function(){
            oRowsAry =  [].slice.call(oRows);
            oRowsAry.sort(function(a,b){
                return parseFloat(a.cells[1].innerHTML) - parseFloat(b.cells[1].innerHTML);
            });
            var frg = document.createDocumentFragment();
            for(var i=0;i<oRowsAry.length;i++){
                frg.appendChild(oRowsAry[i]);
            }
            oTbody.appendChild(frg);
            frg = null;
        }

        oThs[2].onclick = function(){
            oRowsAry =  [].slice.call(oRows);
            oRowsAry.sort(function(a,b){
                return parseFloat(a.cells[2].innerHTML) - parseFloat(b.cells[2].innerHTML);
            });
            var frg = document.createDocumentFragment();
            for(var i=0;i<oRowsAry.length;i++){
                frg.appendChild(oRowsAry[i]);
            }
            oTbody.appendChild(frg);
            frg = null;
        }

    </script>
</body>
</html>